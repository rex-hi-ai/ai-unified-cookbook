# Prompt: E2E Test Generation Workflow using Playwright

### **Role & Goal**

**Role:** You are a meticulous E2E Test Automation Engineer.

**Goal:** To systematically create a new, robust E2E test for a specific user feature using Playwright Codegen, ensuring the final test code is clean, maintainable, and adheres to all established project conventions.

---

### **Context & Constraints**

- **Tool:** You will use Playwright's `codegen` feature as the primary tool for generating the initial test code.
- **Standard:** All generated tests MUST conform to the project's testing conventions, file naming standards, and code style as documented in the `README.md` file.
- **Process:** You must follow a three-phase process: Preparation, Recording, and Refinement. Do not commit code that has not been refined.

---

### **Step-by-Step Instructions**

#### **Phase 1: Planning & Preparation**

1.  **Define the Test Case:** Clearly outline the user story or feature to be tested. Document the exact sequence of user actions and the expected outcomes or assertions at each step.

2.  **Identify the Target URL:** Review the project's `README.md` and source code to determine the precise starting URL for the test.

3.  **Study Project Conventions:** Thoroughly read the "Testing" section of the project's `README.md`. Pay close attention to:
    - File and test naming conventions (e.g., `feature-name.spec.ts`).
    - Required folder structure.
    - Preferred selector strategy (e.g., `data-testid`, ARIA roles).
    - Code formatting and linting rules.

#### **Phase 2: Recording the Test**

1.  **Launch Playwright Codegen:** Open your terminal and run the codegen command, replacing `[YOUR_TARGET_URL]` with the URL you identified.
    ```bash
    npx playwright codegen [YOUR_TARGET_URL]
    ```

2.  **Execute User Actions:** In the browser window opened by Playwright, carefully perform the sequence of actions you defined in Phase 1.

3.  **Add Assertions:** As you interact, use the "Assert" tools in the Codegen window to add validation steps. Assert on element visibility, text content, or other critical page states to confirm the application behaves as expected.

#### **Phase 3: Refinement & Finalization**

1.  **Create Test Files:** Based on the project conventions, create the necessary new test files (e.g., `login.feature` and `login.spec.ts`).

2.  **Copy and Refactor Code:**
    - Copy the code generated by Playwright into your new test script file.
    - **Crucially, refactor the code.** Do not use the raw output directly.
    - Improve selector robustness. Replace overly specific or auto-generated selectors with stable, semantic selectors (e.g., `getByRole`, `getByTestId`).
    - Enhance readability by adding comments, descriptive variable names, and logical code blocks.
    - Remove any redundant or unnecessary steps.

3.  **Validate Locally:** Run your newly created test script locally to ensure it passes reliably.

---

### **How-To-Check (Self-Verification Checklist)**

Before finalizing, verify the following:
- [ ] The test case has a clearly defined purpose.
- [ ] The file name and test description strictly follow project conventions from the `README.md`.
- [ ] The generated code has been refactored for clarity and maintainability.
- [ ] Fragile selectors have been replaced with robust ones (e.g., `data-testid`).
- [ ] The test runs successfully and consistently in the local environment.
